# This files sets the parameters required for aeva_hq_odometry
# To do: combine with aeva_hq.yaml! don't want 2 configs

# dataset
dataset: "aevahq"
dataset_options:
  all_sequences: false
  root_path: "/home/ASRL/data/aevahq"
  sequence: "routeB_run1_binary"
  init_frame: 0
  last_frame: 100000

  # aeva_hq-specific
  active_lidars: [false, false, false, true]  # 0: front, 1: left, 2: right, 3: back
  active_gyros: [false, false, false, true] # 0: front, 1: left, 2: right, 3: back
  xi_sv: [[-1.65343088,  0.26828037, -1.74613417,  0.00546397, -0.02480444, 0.02448552],
          [-1.39670762,  0.60708398, -1.86611052,  0.01546543, -0.03268383, -1.55160975],
          [-0.23814386,  0.46417746, -1.78343696, -0.03448442,  0.04261376, 1.60518773],
          [-0.50589177, -0.25694916, -1.73534545,  0.06671151, -0.05195967, -3.10584703]]
  gyro_ivar: [[38414.1900174 ,   211.09264848, 68180.48246418],
              [68074.57875076, 231233.85785343, 718126.77950918],
              [80681.31172322, 618802.76763251, 402177.87362123],
              [117368.57495372, 406215.18989707, 506695.83856484]]
  nframes_gbias_calib: 120

# doppler calib
doppler_options:
  root_path: "/home/ASRL/Experiments/sensor_config/aeva/"
  model: "mar4_aeries2_lrvar_bp4-rim_vp3-imv-g_r5-150-e5_s0123_a0p1_aplat_newcalib_redo"
  downsample_steps: 2 # after image projection  

# odometry
odometry: "doppler_filter"
odometry_options:
  ransac_max_iter: 40
  ransac_thres: 0.4
  ransac_min_dist: 5.0
  ransac_gyro: false
  min_dist: 5.0 
  max_dist: 150.0 
  integration_steps: 100
  zero_vel_tol: 0.03
  P0inv: [1e6, 1e6, 1e6, 1e8, 1e8, 1e8]
  Qkinv: [3.0e+2, 4.1e+3, 1.9e+3, 6.2e+4, 3.6e+4, 4.1e+5]
  Qzinv: [0.0e0, 1.3e2, 3.2e2, 5.1e4, 5.1e4, 0.0e0]
  
  # filter-specific
  downsample_steps: 2 # before image projection